.\" Generated by Mmark Markdown Processer - mmark.miek.nl
.TH "COREDNS-HEADER" 7 "February 2025" "CoreDNS" "CoreDNS Plugins"

.SH "NAME"
.PP
\fIheader\fP - modifies the header for queries and responses.

.SH "DESCRIPTION"
.PP
\fIheader\fP ensures that the flags are in the desired state for queries and responses.
The modifications are made transparently for the client and subsequent plugins.

.SH "SYNTAX"
.PP
.RS

.nf
header {
    [SELECTOR] ACTION FLAGS...
    [SELECTOR] ACTION FLAGS...
}

.fi
.RE

.IP \(bu 4
\fBSELECTOR\fP defines if the action should be applied on \fB\fCquery\fR or \fB\fCresponse\fR. In future CoreDNS version the selector will be mandatory. For backwards compatibility the action will be applied on \fB\fCresponse\fR if the selector is undefined.
.IP \(bu 4
\fBACTION\fP defines the state for DNS message header flags. Actions are evaluated in the order they are defined so last one has the
most precedence. Allowed values are:

.RS
.IP \(en 4
\fB\fCset\fR
.IP \(en 4
\fB\fCclear\fR

.RE
.IP \(bu 4
\fBFLAGS\fP are the DNS header flags that will be modified. Current supported flags include:

.RS
.IP \(en 4
\fB\fCaa\fR - Authoritative(Answer)
.IP \(en 4
\fB\fCra\fR - RecursionAvailable
.IP \(en 4
\fB\fCrd\fR - RecursionDesired

.RE


.SH "EXAMPLES"
.PP
Make sure recursive available \fB\fCra\fR flag is set in all the responses:

.PP
.RS

.nf
\&. {
    header {
        response set ra
    }
}

.fi
.RE

.PP
Make sure "recursion available" \fB\fCra\fR and "authoritative answer" \fB\fCaa\fR flags are set and "recursion desired" is cleared in all responses:

.PP
.RS

.nf
\&. {
    header {
        response set ra aa
        response clear rd
    }
}

.fi
.RE

.PP
Make sure "recursion desired" \fB\fCrd\fR is set for all subsequent plugins::

.PP
.RS

.nf
\&. {
    header {
        query set rd
    }
}

.fi
.RE

